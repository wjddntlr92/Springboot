package com.mysite.sbb.itemImg;

import java.util.List;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.web.multipart.MultipartFile;

import com.mysite.sbb.item.SiteItem;

@Service
public class ItemImgService {
	
	@Value("${file.download.director}")
	private String uploadRootDirectory;
	
	
	public boolean imgFileCheck(List<MultipartFile> imgs) {
		final String[] PERMISSION_FILE_EXT_ARR = {"GIF", "JPEG", "JPG", "PNG", "BMP", "PDF", "MP4"};
	
		boolean imgBoolean=false;
		for( MultipartFile img : imgs) {
			imgBoolean = false;
			String originFileName =  img.getOriginalFilename();
			String originFileExtension = originFileName.substring(originFileName.lastIndexOf(".")+1).toUpperCase();
			
			for(String ext :PERMISSION_FILE_EXT_ARR) {
				if(ext==originFileExtension) {
					imgBoolean =true;
					break;
					
				}
			}
			if(imgBoolean==false) {
				break;
			}
			
		}
		return imgBoolean;
	}
	
	
	public void createImg(List<MultipartFile> imgs, SiteItem siteItem) {
		for( MultipartFile img : imgs) {
			ItemImg itemImg = new ItemImg();
			itemImg.setSiteItem(siteItem);
			itemImg.setItemImgOriginName(img.getOriginalFilename());
			
			
			
		}
	}

}
